import W,{useState as u,useMemo as Y,useRef as Z}from"react";import{createPortal as ee}from"react-dom";import{MoreHorizontal as te,Trash2 as ae,ChevronLeft as se,ChevronRight as re,ChevronDown as oe,Search as ne,Plus as le,ArrowUp as ie,ArrowDown as ce,ArrowUpDown as de,Inbox as ge,Download as he}from"lucide-react";import{X as K}from"lucide-react";import{jsx as C,jsxs as Q}from"react/jsx-runtime";var j=({icon:r,type:o="text",color:n="#2563eb",value:l,onChange:g,placeholder:p,onClear:i,darkMode:s})=>Q("div",{className:`relative group w-full ${s?"dark":""}`,style:{"--highlight":n},children:[r&&C("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none transition-colors duration-200 group-focus-within:text-[var(--highlight)] text-slate-400",children:C(r,{className:"w-4 h-4"})}),C("input",{type:o,value:l,onChange:g,placeholder:p,className:`
          block w-full py-2.5 text-sm bg-white dark:bg-slate-900 
          border border-slate-200 dark:border-slate-800 rounded-xl 
          outline-none transition-all dark:text-white
          focus:ring-2 focus:ring-[var(--highlight)]/20 focus:border-[var(--highlight)]
          ${r?"pl-10":"pl-4"}
          ${i?"pr-10":"pr-4"}
        `}),l&&i&&C("button",{onClick:i,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:C(K,{className:"w-4 h-4"})})]});import{Fragment as ue,jsx as e,jsxs as a}from"react/jsx-runtime";var pe=W.memo(({row:r,columns:o,color:n,selectable:l,isSelected:g,onSelect:p})=>{let i={left:"text-left",center:"text-center",right:"text-right"};return a("tr",{className:"group transition-colors duration-150 hover:bg-[var(--highlight)]/5",children:[l&&e("td",{className:"px-6 py-4 border-b border-transparent",children:e("input",{type:"checkbox",checked:g,onChange:()=>p(r.id),style:{"--accent":n},className:"w-4 h-4 rounded border-slate-300 text-[var(--accent)] focus:ring-[var(--accent)] cursor-pointer"})}),o.filter(s=>!s.hidden).map(s=>e("td",{className:`
            whitespace-nowrap px-6 py-4 
            text-slate-600 dark:text-slate-300
            transition-colors group-hover:text-slate-900 dark:group-hover:text-white
            ${i[s.align||"left"]}
          `,children:s.actions?e(be,{actions:s.actions,row:r,highlightColor:n}):s.format?s.format(r[s.accessor],r,n):String(r[s.accessor])},String(s.accessor)))]})}),me=({isOpen:r,onClose:o,anchorRect:n,actions:l,row:g,highlightColor:p,darkMode:i})=>{if(!r||!n)return null;let s={position:"fixed",top:`${n.bottom+8}px`,left:`${n.right-192}px`,zIndex:9999};return ee(a("div",{className:i?"dark":"",style:{"--highlight":p},children:[e("div",{className:"fixed inset-0 z-[9998]",onClick:o}),e("div",{style:s,className:"w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-2xl ring-1 ring-black ring-opacity-5 dark:border-slate-700 dark:bg-slate-800 animate-in fade-in zoom-in duration-150",children:e("div",{className:"py-1",children:l.map((c,S)=>{let f=c.icon;return a("button",{onClick:()=>{c.onClick(g),o()},className:`flex w-full items-center gap-3 px-4 py-2.5 text-sm transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/50 ${c.color||"text-slate-700 dark:text-slate-200"}`,children:[f&&e(f,{className:"w-4 h-4 opacity-70"}),e("span",{className:"font-medium",children:c.label})]},S)})})})]}),document.body)},be=({actions:r,row:o,highlightColor:n,darkMode:l})=>{let[g,p]=u(!1),[i,s]=u(null),c=Z(null);return a(ue,{children:[e("button",{ref:c,onClick:f=>{f.stopPropagation(),c.current&&s(c.current.getBoundingClientRect()),p(!g)},className:`p-2 rounded-full transition-all duration-200 ${g?"bg-[var(--highlight)]/10 text-[var(--highlight)]":"hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400"}`,children:e(te,{className:"w-5 h-5"})}),e(me,{isOpen:g,onClose:()=>p(!1),anchorRect:i,actions:r,row:o,highlightColor:n,darkMode:!!l})]})},Te=({data:r=[],columns:o=[],pagination:n=!0,selectable:l=!1,customArrayPagination:g=[5,10,25,50,100],defaultPageSize:p=10,filter:i=!1,filterPlaceholder:s="Buscar registros...",color:c="#2563eb",add:S=!1,textAdd:f="Agregar",actionAdd:E=()=>{},excelExport:z=!1,onDeleteRows:O=()=>{},emptyState:I,darkMode:D=!1})=>{let[k,M]=u(1),[T,B]=u(p),[R,L]=u(""),[h,F]=u({key:null,direction:"asc"}),[b,A]=u(new Set),U=t=>{let d="asc";h.key===t&&h.direction==="asc"&&(d="desc"),F({key:t,direction:d})},y=Y(()=>{let t=[...r];if(i&&R){let d=o.filter(m=>m.filter).map(m=>m.accessor);t=t.filter(m=>d.some(v=>String(m[v]).toLowerCase().includes(R.toLowerCase())))}return h.key&&t.sort((d,m)=>{let v=d[h.key],P=m[h.key];return v<P?h.direction==="asc"?-1:1:v>P?h.direction==="asc"?1:-1:0}),t},[r,R,i,o,h]),$=Math.ceil(y.length/T)||1,x=n?y.slice((k-1)*T,k*T):y,H=()=>{b.size===x.length?A(new Set):A(new Set(x.map(t=>t.id)))},V=t=>{let d=new Set(b);d.has(t)?d.delete(t):d.add(t),A(d)},X=()=>{let t=o.filter(w=>!w.hidden&&!w.actions),d=t.map(w=>`"${w.header}"`).join(","),m=y.map(w=>t.map(G=>{let J=w[G.accessor];return`"${String(J).replace(/"/g,'""')}"`}).join(",")).join(`
`),v="\uFEFF"+d+`
`+m,P=new Blob([v],{type:"text/csv;charset=utf-8;"}),q=URL.createObjectURL(P),N=document.createElement("a");N.setAttribute("href",q),N.setAttribute("download",`Export_${new Date().getTime()}.csv`),document.body.appendChild(N),N.click(),document.body.removeChild(N)},_={left:"text-left",center:"text-center",right:"text-right"};return a("div",{className:`flex flex-col gap-4 ${D?"dark":""}`,style:{"--highlight":c},children:[a("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[a("div",{className:"flex flex-1 gap-4 w-full sm:w-auto",children:[i&&e("div",{className:"w-full sm:max-w-xs",children:e(j,{icon:ne,color:c,value:R,onChange:t=>L(t.target.value),placeholder:s,onClear:()=>L(""),darkMode:D})}),l&&b.size>0&&a("div",{className:"flex items-center gap-3 animate-in fade-in slide-in-from-left-4",children:[a("span",{className:"text-sm font-bold text-slate-500 hidden md:inline",children:[b.size," seleccionados"]}),a("button",{onClick:()=>{O(Array.from(b)),A(new Set)},className:"text-xs font-bold text-red-500 hover:text-red-600 bg-red-50 dark:bg-red-500/10 px-4 py-2.5 rounded-xl transition-all active:scale-95 flex items-center gap-2 border border-red-100 dark:border-red-500/20",children:[e(ae,{className:"w-4 h-4"}),e("span",{children:"Eliminar"})]})]})]}),a("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[z&&a("button",{onClick:X,className:"flex items-center justify-center gap-2 px-6 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold text-sm shadow-lg transition-all active:scale-95 whitespace-nowrap w-full sm:w-auto shadow-emerald-600/20",children:[e(he,{className:"w-4 h-4"}),e("span",{children:"Exportar"})]}),S&&a("button",{onClick:E,style:{backgroundColor:"var(--highlight)"},className:"flex items-center justify-center gap-2 px-6 py-2.5 hover:opacity-90 text-white rounded-xl font-bold text-sm shadow-lg transition-all active:scale-95 whitespace-nowrap w-full sm:w-auto shadow-[var(--highlight)]/20",children:[e(le,{className:"w-4 h-4"}),e("span",{children:f})]})]})]}),e("div",{className:"w-full rounded-2xl border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900 overflow-hidden",children:e("div",{className:"overflow-x-auto",children:a("table",{className:"min-w-full border-separate border-spacing-0 text-sm",children:[e("thead",{className:"bg-slate-50/50 dark:bg-slate-950/40",children:a("tr",{children:[l&&e("th",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 w-10 text-left",children:e("input",{type:"checkbox",onChange:H,checked:x.length>0&&b.size===x.length,style:{"--accent":c},className:"w-4 h-4 rounded border-slate-300 text-[var(--accent)] focus:ring-[var(--accent)] cursor-pointer"})}),o.filter(t=>!t.hidden).map(t=>e("th",{onClick:()=>U(t.accessor),className:`
                      px-6 py-4 font-bold uppercase tracking-tight text-slate-500 dark:text-slate-400
                      ${_[t.align||"left"]}
                      border-b border-slate-100 dark:border-slate-800 cursor-pointer select-none group/th
                    `,children:a("div",{className:`flex items-center gap-2 ${t.align==="center"?"justify-center":t.align==="right"?"justify-end":""}`,children:[t.header,e("span",{className:`transition-colors ${h.key===t.accessor?"text-[var(--highlight)]":"text-slate-300 opacity-0 group-hover/th:opacity-100"}`,children:h.key===t.accessor?h.direction==="asc"?e(ie,{className:"w-3 h-3"}):e(ce,{className:"w-3 h-3"}):e(de,{className:"w-3 h-3"})})]})},String(t.accessor)))]})}),e("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:x.length>0?x.map(t=>e(pe,{row:t,columns:o,color:c,selectable:l,isSelected:b.has(t.id),onSelect:V},t.id)):e("tr",{children:e("td",{colSpan:o.length+(l?1:0),children:I?e(I,{}):a("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400 gap-3",children:[e(ge,{className:"w-12 h-12 opacity-20"}),e("p",{className:"font-medium italic",children:"No se encontraron registros para mostrar"})]})})})})]})})}),n&&y.length>0&&a("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 px-2 py-2 text-sm text-slate-500 dark:text-slate-400 font-medium",children:[e("div",{className:"flex items-center gap-4",children:a("div",{className:"flex items-center gap-2",children:[e("span",{children:"Mostrar"}),a("div",{className:"relative",children:[e("select",{value:T,onChange:t=>{B(Number(t.target.value)),M(1)},className:"appearance-none bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg px-3 py-1.5 pr-8 focus:outline-none focus:ring-2 focus:ring-[var(--highlight)]/20 cursor-pointer text-slate-700 dark:text-slate-300 font-bold",children:g.map(t=>e("option",{value:t,children:t},t))}),e(oe,{className:"w-4 h-4 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none opacity-50"})]})]})}),a("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>M(t=>Math.max(t-1,1)),disabled:k===1,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 disabled:opacity-30 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:e(se,{className:"w-4 h-4"})}),a("div",{className:"flex items-center gap-1 min-w-[60px] justify-center",children:[e("span",{className:"font-bold text-[var(--highlight)]",children:k}),e("span",{className:"opacity-30",children:"/"}),e("span",{children:$})]}),e("button",{onClick:()=>M(t=>Math.min(t+1,$)),disabled:k===$,className:"p-2 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 disabled:opacity-30 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:e(re,{className:"w-4 h-4"})})]})]})]})};export{j as Input,Te as Table};
//# sourceMappingURL=index.mjs.map